# AutoCDN - Cloudflare ä¼˜é€‰ IP è‡ªåŠ¨æ›´æ–°å·¥å…·

AutoCDN æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Cloudflare CDN IP ä¼˜é€‰å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·è‡ªåŠ¨ç­›é€‰æœ€å¿«ã€æœ€ç¨³å®šçš„ Cloudflare è¾¹ç¼˜èŠ‚ç‚¹ IPï¼Œå¹¶è‡ªåŠ¨æ›´æ–°åˆ°æ‚¨çš„ DNS è§£æè®°å½•ä¸­ã€‚

æœ¬é¡¹ç›®åŒæ—¶æä¾› **ç°ä»£åŒ–å›¾å½¢ç•Œé¢ (GUI)** å’Œ **å‘½ä»¤è¡Œå·¥å…· (CLI)**ï¼Œæ”¯æŒ Windowsã€Linux (AMD64/ARM64) å’Œ macOS å¹³å°ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **å…¨è‡ªåŠ¨æµ‹é€Ÿ**ï¼šæ”¯æŒ TCP å»¶è¿Ÿæµ‹é€Ÿå’Œä¸‹è½½é€Ÿåº¦æµ‹é€Ÿï¼Œç²¾å‡†ç­›é€‰ä¼˜è´¨ IPã€‚
- **è‡ªåŠ¨ DNS æ›´æ–°**ï¼šæµ‹é€Ÿå®Œæˆåï¼Œè‡ªåŠ¨å°†æœ€ä¼˜ IP æ›´æ–°åˆ° Cloudflare çš„ DNS è®°å½•ï¼ˆæ”¯æŒ IPv4 å’Œ IPv6ï¼‰ã€‚
- **å¤šå¹³å°æ”¯æŒ**ï¼š
  - **Windows**: æä¾›åŸç”Ÿ GUI ç•Œé¢ï¼ˆåŸºäº Wails + Reactï¼‰å’Œ CLI å·¥å…·ã€‚
  - **Linux**: æä¾› CLI å·¥å…·ï¼Œæ”¯æŒ x86_64 å’Œ ARM64 (æ ‘è“æ´¾/ç”µè§†ç›’å­/VPS)ã€‚
  - **macOS**: æä¾› CLI å·¥å…·ã€‚
- **çµæ´»é…ç½®**ï¼š
  - æ”¯æŒå¤šé…ç½®æ–‡ä»¶ç®¡ç†ã€‚
  - CLI æ¨¡å¼æ”¯æŒé€šè¿‡å‘½ä»¤è¡Œå‚æ•°å¿«é€Ÿè¦†ç›–é…ç½®ã€‚
  - GUI æ¨¡å¼æä¾›å¯è§†åŒ–é…ç½®ç¼–è¾‘å™¨ã€‚
- **IPv4 / IPv6 æ”¯æŒ**ï¼šè‡ªåŠ¨è¯†åˆ« IP æ–‡ä»¶ç±»å‹å¹¶æ‰§è¡Œç›¸åº”çš„æµ‹é€Ÿå’Œæ›´æ–°é€»è¾‘ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (CLI å‘½ä»¤è¡Œç‰ˆ)

### 1. å‡†å¤‡å·¥ä½œ

è¯·ç¡®ä¿æ‚¨æ‹¥æœ‰ Cloudflare çš„ API Key å’Œ Zone IDã€‚

- **API Key**: åœ¨ Cloudflare "My Profile" -> "API Tokens" ä¸­åˆ›å»ºã€‚
- **Zone ID**: åœ¨ Cloudflare åŸŸåæ¦‚è§ˆé¡µé¢çš„å³ä¸‹è§’å¯ä»¥æ‰¾åˆ°ã€‚

### 2. ä¸‹è½½ä¸è¿è¡Œ

ä¸‹è½½å¯¹åº”å¹³å°çš„æ„å»ºäº§ç‰©ï¼ˆåœ¨ `build/bin/` ç›®å½•ä¸‹ï¼‰ï¼Œå¹¶å‡†å¤‡ `config.yaml` å’Œ IP åº“æ–‡ä»¶ï¼ˆå¦‚ `ip.txt`ï¼‰ã€‚

**åŸºæœ¬ç”¨æ³•ï¼š**

```bash
# è¿è¡Œå¹¶æŒ‡å®šé…ç½®æ–‡ä»¶
./AutoCDN-CLI -c config.yaml
```

**å‘½ä»¤è¡Œå‚æ•°è¯´æ˜ï¼š**

| å‚æ•°     | è¯´æ˜                             | é»˜è®¤å€¼        |
| :------- | :------------------------------- | :------------ |
| `-c`     | æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„                 | `config.yaml` |
| `-f`     | æŒ‡å®š IP æ®µæ–‡ä»¶è·¯å¾„ (è¦†ç›–é…ç½®)    | (ç©º)          |
| `-n`     | å»¶è¿Ÿæµ‹é€Ÿåç¨‹æ•°é‡                 | 200           |
| `-t`     | å»¶è¿Ÿæµ‹é€Ÿæ¬¡æ•°                     | 4             |
| `-tl`    | å¹³å‡å»¶è¿Ÿä¸Šé™ (ms)                | 9999          |
| `-tll`   | å¹³å‡å»¶è¿Ÿä¸‹é™ (ms)                | 0             |
| `-tlr`   | ä¸¢åŒ…ç‡ä¸Šé™ (0-1)                 | 1.0           |
| `-dn`    | ä¸‹è½½æµ‹é€Ÿæ•°é‡ (å–å»¶è¿Ÿæœ€ä½çš„å‰Nä¸ª) | 10            |
| `-dt`    | ä¸‹è½½æµ‹é€Ÿæ—¶é—´ (ç§’)                | 10            |
| `-sl`    | ä¸‹è½½é€Ÿåº¦ä¸‹é™ (MB/s)              | 0             |
| `-o`     | ç»“æœè¾“å‡ºæ–‡ä»¶è·¯å¾„ (CSV)           | `result.csv`  |
| `-dd`    | ç¦ç”¨ä¸‹è½½æµ‹é€Ÿ (ä»…å»¶è¿Ÿæµ‹é€Ÿ)        | `false`       |
| `-allip` | å¯¹æ‰€æœ‰ IP è¿›è¡Œæµ‹é€Ÿ               | `false`       |

**ç¤ºä¾‹ï¼š**

```bash
# ä½¿ç”¨ my_config.yaml é…ç½®ï¼Œå¹¶å¼ºåˆ¶æŒ‡å®š ip.txt æ–‡ä»¶ï¼Œä»…æµ‹é€Ÿå»¶è¿Ÿä½äº 200ms çš„ IP
./AutoCDN-CLI -c my_config.yaml -f ip.txt -tl 200
```

---

## ğŸ–¥ï¸ å›¾å½¢ç•Œé¢ (Windows GUI)

ç›´æ¥è¿è¡Œ `AutoCDN.exe`ã€‚

1.  åœ¨å·¦ä¾§ä¾§è¾¹æ é€‰æ‹©æˆ–æ–°å»ºé…ç½®æ–‡ä»¶ã€‚
2.  åœ¨å³ä¾§ç¼–è¾‘å™¨ä¸­å¡«å…¥ Cloudflare ä¿¡æ¯å’Œæµ‹é€Ÿå‚æ•°ã€‚
3.  ç‚¹å‡» "ä¿å­˜" æŒ‰é’®ã€‚
4.  ç‚¹å‡»ä¸»ç•Œé¢çš„ "å¼€å§‹æµ‹é€Ÿ" æŒ‰é’®å³å¯ã€‚

---

## ğŸ› ï¸ æ„å»ºæŒ‡å—

å¦‚æœæ‚¨å¸Œæœ›ä»æºç è‡ªè¡Œæ„å»ºï¼Œè¯·ç¡®ä¿å·²å®‰è£… **Go 1.21+** å’Œ **Node.js 16+**ã€‚

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-repo/AutoCDN.git
cd AutoCDN
```

### 2. æ„å»ºå‘½ä»¤

æˆ‘ä»¬æä¾›äº†æ–¹ä¾¿çš„ NPM è„šæœ¬æ¥ç®¡ç†ä¸åŒå¹³å°çš„æ„å»ºï¼š

| å¹³å°              | æ„å»ºå‘½ä»¤                        | ä¸ä»…è¾“å‡ºç›®å½•                        |
| :---------------- | :------------------------------ | :---------------------------------- |
| **Windows GUI**   | `npm run build:gui:windows`     | `build/bin/AutoCDN.exe`             |
| **Windows CLI**   | `npm run build:cli:windows`     | `build/bin/AutoCDN-CLI.exe`         |
| **Linux (AMD64)** | `npm run build:cli:linux`       | `build/bin/AutoCDN-CLI-Linux-amd64` |
| **Linux (ARM64)** | `npm run build:cli:linux:arm64` | `build/bin/AutoCDN-CLI-Linux-arm64` |
| **macOS (Intel)** | `npm run build:cli:mac`         | `build/bin/AutoCDN-CLI-Mac`         |
| **å…¨éƒ¨æ„å»º**      | `npm run build:all`             | `build/bin/` ä¸‹æ‰€æœ‰æ–‡ä»¶             |

### 3. å¼€å‘æ¨¡å¼

å¦‚æœæ‚¨æ­£åœ¨å¼€å‘ GUI ç•Œé¢ï¼š

```bash
npm run dev
```

è¿™å°†å¯åŠ¨ Wails å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒçƒ­é‡è½½ã€‚

---

## âš™ï¸ é…ç½®æ–‡ä»¶ (config.yaml)

```yaml
cloudflare:
  api_key: "your_api_key"
  email: "your_email@example.com"
  zone_id: "your_zone_id"
  domains:
    - "cdn.example.com"
  domainipv6s: [] # IPv6 åŸŸååˆ—è¡¨

speed_test:
  routines: 200 # å»¶è¿Ÿæµ‹é€Ÿå¹¶å‘æ•°
  ping_times: 4 # æ¯æ¬¡ Ping æ¬¡æ•°
  test_count: 10 # ä¸‹è½½æµ‹é€Ÿå€™é€‰æ•°é‡
  download_time: 10 # ä¸‹è½½æµ‹é€ŸæŒç»­æ—¶é—´(ç§’)
  tcp_port: 443 # æµ‹é€Ÿç«¯å£
  speed_test_url: "https://speed.cloudflare.com/__down?bytes=50000000" # æµ‹é€Ÿæ–‡ä»¶åœ°å€
  max_delay: 200 # å»¶è¿Ÿä¸Šé™ (ms)
  min_speed: 5 # é€Ÿåº¦ä¸‹é™ (MB/s)
  ipv4_file: "ip.txt" # é»˜è®¤ IPv4 åº“
  ipv6_file: "ipv6.txt" # é»˜è®¤ IPv6 åº“
```

## âš ï¸ æ³¨æ„äº‹é¡¹

- **æƒé™é—®é¢˜**ï¼šåœ¨ Linux ä¸Šè¿è¡Œ CLI å·¥å…·å‰ï¼Œè¯·ç¡®ä¿èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š`chmod +x AutoCDN-CLI-Linux-*`ã€‚
- **404 é”™è¯¯**ï¼šå¦‚æœè¿è¡Œé€šè¿‡ä½†æç¤º "404 Not Found"ï¼Œè¯·æ£€æŸ¥ `zone_id` æ˜¯å¦æ­£ç¡®ï¼Œä¸”æä¾›çš„ API Key æ˜¯å¦æœ‰æƒé™æ“ä½œè¯¥ Zoneã€‚
- **IPv6 æµ‹é€Ÿ**ï¼šè‹¥è¦æµ‹é€Ÿ IPv6ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç½‘ç»œç¯å¢ƒæ”¯æŒ IPv6ï¼Œå¹¶æŒ‡å®šåŒ…å« IPv6 åœ°å€çš„æ–‡ä»¶ã€‚

---

Powered by Wails, React & Go.
